# Σύγκριση Επιδόσεων


### Επειδή η κατασκευή του MRNG είναι ακριβή, χρησιμοποιήθηκαν 10k εικόνες κατά την σύγκριση των μεθόδων
### Ως queries χρησιμοποιούνται οι 10 πρώτες εικόνες του query dataset

<br/>

### Ο ΜAF τις περισσότερες φορές βγαίνει 1 στους GNNS/MRNG, εκτός αν οι προσεγγιστικοί γείτονες που βρίσκονται έχουν πολύ μεγάλη διαφορά από τους πραγματικούς, με αποτέλεσμα όλα τα Queries να έχουν υψηλό MAF. Για παράδειγμα, αν μόνο 1 Query από όλα τα άλλα βγάζει καλά αποτελέσματα, το MAF θα βγεί επίσης καλό.
### Επειδή αυτό δε μας λέει πολλά για την πραγματική ακρίβεια των παραμέτρων που χρησιμοποιήθηκαν, για τη σύκριση των μεθόδων υπολογίζεται και το MAF average.


<br/>

## Περιγραφή

### MRNG
Για μικρό l (l<=50), το MAF Average βγαίνει πάνω από **1.5**. Αυτό που συμβαίνει είναι ότι, επειδή κάθε σημείο έχει περίπου 10 με 20 γείτονες, οι γείτονες του αρχικού navigating node και ίσως αυτοί των επόμενων 2-3 navigating nodes γεμίζουν ήδη τον l. Έτσι η επανάληψη τερματίζει, έχοντας διασχύσει ένα σχετικά μικρό μονοπάτι με αρχή το κεντροειδές. Οπότε τα Queries που βρίσκονται μακριά από το κέντρο του dataset θα αυξύσουν πολύ το MAF Average.

<br/>

### GNNS
Η παράμετρος k δεν παίζει κάποιο ρόλο στην αναζήτηση, καθώς ο αλγόριθμος αναζήτησης ελέγχει τους πρώτους E γείτονες. Οπότε για k=50, πειραματιζόμαστε με τις E,R.

Για R=1,
+   Για E <=10, πολύ γρήγορος (**~0.00020sec**), αλλά το MAF Average βγαίνει >=**1.5**. Ειδικά για E<=5, όπου εκεί αρχίζει συχνά το MAF > **~1.2**
+   Για E = ~30, δηλαδή παρόμοια με default παραμέτρους, ισορροπείται ο χρόνος (**~0.00073sec**) με την ακρίβεια (MAF Average: **~1.24**)
+   Για μεγάλο E = 50, πολύ καλά αποτελέσματα (MAF Average: **~1.1**), αλλά ο χρόνος αυξάνεται αρκετά (**~0.0013sec**)

Η παράμετρος R είναι η πιο ακριβή στον χρόνο, οπότε θέλουμε να είναι αρκετά μικρή ( < 5)
+   Για R=2 και E=10, το MAF Average: **~1.27** με μέσο χρόνο **~0.00056sec**, το οποίο αυτό το tradeoff είναι πιο δεκτό από αυτά με R=1
+   Για R>=3 η βελτίωση είναι ελάχιστη, όμως ο χρόνος αυξάνεται αρκετά. Οπότε αυτός ο συνδυασμός δεν είναι ιδανικός.


### MRNG vs GNNS
Για l <= ~60, έχει παρατηρηθεί ότι ο συνδυασμός (MAF_Avg, χρόνος) που παράγει ο GNNS είναι καλύτερος από τον MRNG. Για l=75 και R=2, E=10, (MAF_Avg, χρόνος) του GNNS και MRNG είναι περίπου ίδιος (**~1.3, ~0.00057sec**). Από το σημείο αυτό και μετά, αν ζητάμε καλύτερο MAF_Average (δηλαδή αυξήσουμε τις παραμέτρους), τότε η καλύτερη επιλογή είναι ο MRNG, διότι η μείωση του MAF_Avg ως πρός το χρόνο τού είναι καλύτερη από αυτήν της GNNS.

<br/>

### LSH vs GNNS/MRNG
+ Για L <= 10, ο LSH βγάζει δεκτά αποτελέσματα για k= ~2\*L. Αν το k είνα μικρότερο, τα αποτελέσματα είναι ακριβείς αλλά η αναζήτηση αργεί. Αν το k είναι μεγαλύτερο, υπάρχει ελάχιστη διαφορά στον χρόνο και MAF Average από αυτά του k= 2\*L. Όμως, εκτός από τους πρώτους Aproximate ΝΝ που βρίσκονται για ένα query, οι υπόλοιποι όλο και χειροτερεύουν. Οπότε αν μας ενδιαφέρουν μόνο οι πρώτοι ANN ενός query, θα μπορούσαμε να αυξήσουμε λίγο περισσότερο το k.

+ Αυτά που πετυχαίνει για L > 10 μπορούμε να πετύχουμε με L<10 σε καλύτερο χρόνο και MAF Average.

Τελικά παρατηρούμε ότι οι ιδανικές παραμέτρους είναι L=~10, k=~20, με **(MAF_Avg,χρόνο)** = **(~1.12 , ~0.0037)**.

Ο LSH έχει γρήγορη κατασκευή και καλά αποτελέσματα αλλά είναι σχεδόν 10 φορές πιο αργός από τους GNNS/MRNG στην αναζήτηση.

<br/>

### Hypercube vs GNNS/MRNG
+ Για k<= 4, το πολύ 16 buckets μπορούν να φτιαχτούν, οπότε για καλά αποτελέσματα χρειάζεται αρκετά μεγάλο M. Γενικά αργεί (0.00357079sec με 0.00714044sec, k=4 και p=1 έως 4).
+ Για k > 8, χρειάζονται πολλά probes εφόσον λιγότερα σημεία βρίσκονται ανά bucket. Καλός χρόνος για probes < 8 , αλλά όχι και τόσο καλά αποτελέσματα. Μόνο ο πρώτος ή και ο δεύτερος Aproximate NN βγαίνουν καλοί.

Ισορροπείται για (k=7, probes=~6) και M=1000 με 3000, όπου **(MAF_Avg, χρόνος) = (~1.3, ~0.002sec)**. Ομοίως είναι πολύ πιο αργός από τους γράφους.